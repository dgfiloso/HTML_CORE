<html>
<head>
	<meta charset="utf-8">
	<title> CORE2016 P3 </title>
	<style>
		body{
			text-align: center;
		}
	</style>
	<script type="text/javascript"
			src="jquery-2.2.0.js">
	</script>
	<script type="text/javascript">
		var operando = "";
		var valor = 0;
		$(function(){
			$("#pantalla").on("click", function(){$("#pantalla").val("");});
			$("#suma").on("click", function(){
				var num = $("#pantalla");
				if(operando === ""){
					valor_temp = num.val();
					valor = +valor_temp;
					operando = "+";
				}else if(operando === "+"){
					valor_temp = num.val();
					valor += +valor_temp;
					operando = "+";
				}else if(operando === "-"){
					valor_temp = num.val();
					valor -= +valor_temp;
					operando = "+";
				}
			});
			$("#resta").on("click", function(){
				var num = $("#pantalla");
				if(operando === ""){
					valor_temp = num.val();
					valor = +valor_temp;
					operando = "-";
				}else if(operando === "+"){
					valor_temp = num.val();
					valor += +valor_temp;
					operando = "-";
				}else if(operando === "-"){
					valor_temp = num.val();
					valor -= +valor_temp;
					operando = "-";
				}
			});
			$("#igual").on("click", function(){
				var num = $("#pantalla");
				valor_temp = num.val();
				if(operando === "+"){
					num.val(valor + +valor_temp);
				}else if(operando === "-"){
					num.val(valor - +valor_temp);
				}
				operando = "";
			});
			$("#cuadrado").on("click", function(){
				var num = $("#pantalla");
				num.val(num.val()*num.val());
			});
			$("#inverso").on("click", function(){
				var num = $("#pantalla");
				num.val(1 / (num.val()));
			});
			$("#raiz").on("click", function(){
				var num = $("#pantalla");
				var numero = +num.val();
				if(numero < 0){
					num.val("ERROR");
				}else{
					num.val(Math.sqrt(numero));
				}
			});
			$("#pentera").on("click", function(){
				var num = $("#pantalla");
				var numero = +num.val();
				num.val(Math.round(numero));
			});
			$("#potencia2").on("click", function(){
				var num = $("#pantalla");
				num.val(Math.pow(2,num.val()));
			});
			$("#factorial").on("click", function(){
				var num = $("#pantalla");
				var fact = 1;
				var numero = num.val();
				if(numero === 0){
					num.val(1);
				}
				else if(numero<0){
					num.val("ERROR");
				}else if(numero%1 !== 0){
					num.val("ERROR");
				}else{
					var temp = numero;
					while(temp>=1){
						fact = fact*temp;
						temp--;
					}
					num.val(fact);
				}
			});
			$("#limpiar").on("click", function(){
				var num = $("#pantalla");
				num.val("");
			});
		});		
	</script>
</head>
<body>
	<div id="main">
		<header> Buenos días, bienvenido a la calculadora de David González Filoso (d.gfiloso@alumnos.upm.es) </header>
		<p> Número: <input type="text" id="pantalla"> </p>
		<p>
			<button id="suma"> + </button>
			<button id="resta"> - </button>
			<button id="igual"> = </button>
			<button id="cuadrado"> x<sup>2</sup> </button>
			<button id="inverso"> 1/x </button>
			<button id="raiz"> sqrt(x) </button>
			<button id="pentera"> parte_entera(x) </button>
			<button id="potencia2"> 2<sup>x</sup> </button>
			<button id="factorial"> x! </button>
			<button id="limpiar"> Limpiar </button>
		</p>
	</div>
</body>
</html>

